<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    {% if jekyll.environment == "production" and site.google_analytics %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "{{ site.google_analytics }}", { anonymize_ip: true });
    </script>
    {% endif %}

    {% assign page_title = page.title | default: site.title %}
    {% assign canonical_path = page.url | replace: 'index.html', '' %}
    <title>
      {% if page.url == "/" %}
        {{ site.title }} | {{ site.affiliation }}
      {% else %}
        {{ page_title }} | {{ site.title }}
      {% endif %}
    </title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="{{ page.description | default: site.description }}" />
    <meta name="keywords" content="{{ site.keywords }}" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="{{ page_title }} | {{ site.title }}" />
    <meta property="og:url" content="{{ site.canonical }}{{ canonical_path }}" />
    <meta property="og:site_name" content="{{ site.title }} | {{ site.affiliation }}" />
    <meta property="og:description" content="{{ page.description | default: site.description }}" />
    <meta property="og:image" content="{{ site.avatar }}" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{{ page_title }} | {{ site.title }}" />
    <meta name="twitter:description" content="{{ page.description | default: site.description }}" />
    <meta name="twitter:image" content="{{ site.avatar }}" />

    <link rel="canonical" href="{{ site.canonical }}{{ canonical_path }}" />
    <link rel="icon" href="{{ "/assets/img/ub.svg" | relative_url }}" />
    <meta name="theme-color" content="#f6f4ef" />

    <link rel="stylesheet" href="{{ "/assets/css/minimal-portfolio.css" | relative_url }}" />
    <script src="{{ "/assets/js/favicon-switcher.js" | relative_url }}" defer></script>
  </head>

  <body class="{% if page.url == "/" %}is-home{% endif %}">
    <a class="skip-link" href="#main-content">Skip to content</a>

    {% include site-header.html %}
    {% include site-menu-overlay.html %}

    <main id="main-content" class="site-main">
      {{ content }}

      {% if site.enable_last_update %}
      <p class="date-stamp">
        Last update:
        <script>
          document.write(
            new Date(document.lastModified).toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
            })
          );
        </script>
      </p>
      {% endif %}
    </main>

    {% include site-footer.html %}
    <script src="{{ "/assets/js/menu-overlay.js" | relative_url }}" defer></script>
  </body>
</html>
